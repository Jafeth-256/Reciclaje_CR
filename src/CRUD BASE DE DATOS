CREATE DATABASE APPWEB;
USE APPWEB;
CREATE USER IF NOT EXISTS 'ADMIN'@'%' IDENTIFIED BY 'PASS';
GRANT ALL PRIVILEGES ON APPWEB.* TO 'ADMIN'@'%'; 
FLUSH PRIVILEGES;
DROP SCHEMA APPWEB;

CREATE TABLE APPWEB.USUARIO (
	id_usuario int not null auto_increment,
    nombre varchar(40),
    apellido varchar(100),
    correo varchar(50) not null,
    contrase√±a varchar(20) not null,
    perfil_ruta_imagen varchar (1024),
    primary key (id_usuario))
    engine= InnoDB default character set = utf8mb4;
    
CREATE TABLE APPWEB.TAB_HISTORIAL_RECICLAJE(
	cod_hr int not null,
    id_usuario int,
    titulo varchar(20),
    fecha_publicacion date,
    linea1 varchar(1024),
    linea2 varchar(1024),
    ruta_img varchar(1024),
    primary key (cod_hr))
     engine= InnoDB default character set = utf8mb4;
    
CREATE TABLE APPWEB.TAB_INFO_CAT (
	cod_infocat int not null auto_increment,
    titulo varchar(40),
    ruta_imagen varchar (1024),
    primary key (cod_infocat))
    engine= InnoDB default character set = utf8mb4;
    
    INSERT INTO APPWEB.TAB_INFO_CAT (titulo) values 
	('Consejos Practicos'),
    ('Guias'),
    ('Recursos Visuales');
    
CREATE TABLE APPWEB.TAB_INFO_SECCION(
	cod_seccion int not null auto_increment,
    cod_infocat int,
    id_usuario int,
    titulo varchar(50),
    linea_1 varchar(2048),
    linea_2 varchar(2048),
    ruta_img varchar(1024),
    primary key (cod_seccion),
    foreign key fk_info_usuario(id_usuario) references USUARIO (id_usuario),
    foreign key fk_info_cat(cod_infocat) references TAB_INFO_CAT (cod_infocat))
    engine= InnoDB default character set = utf8mb4;

    CREATE TABLE APPWEB.TAB_PART_COMUNITARIA(
		cod_part varchar (50),
        titulo varchar (100),
        ruta_img varchar (1024),
        primary key (cod_part))
        engine= InnoDB default character set = utf8mb4;
        
	INSERT INTO APPWEB.tab_part_comunitaria (cod_part, titulo) VALUES
		('PMC','Programas comunitarios'),
        ('HUR','Hubicaciones de reciclaje'),
        ('HOR','Horarios de recoleccion');
        
        
	CREATE TABLE APPWEB.TAB_PC_SECCION(
		cod_pc_seccion int auto_increment,
        id_usuario int,
        cod_part varchar(50),
        titulo varchar(30),
        fecha_publicacion date,
		linea_1 varchar(2048),
		linea_2 varchar(2048),
		ruta_img varchar(1024),
		primary key (cod_pc_seccion),
        foreign key fk_pc_usuario (id_usuario) references USUARIO (id_usuario),
        foreign key fk_cod_par(cod_part) references TAB_PART_COMUNITARIA (cod_part))
        engine= InnoDB default character set = utf8mb4;

		
	CREATE TABLE APPWEB.TAB_AYUDA_SOPORTE(
		cod_as varchar(50),
        titulo varchar(100),
        primary key (cod_as))
        engine= InnoDB default character set = utf8mb4;
	
	
    INSERT INTO appweb.tab_ayuda_soporte VALUES 
		('PF', 'Preguntas Frecuentes'),
        ('FC', 'Formalario de contacto'),
        ('ES', 'Enlaces adicionales');
        
	CREATE TABLE APPWEB.TAB_preguntas_frecuentes(
		id_pregunta int unique auto_increment,
        id_usuario int,
        titulo varchar (40),
        linea1 varchar(1024),
        linea2 varchar(1024),
        respuesta1 varchar(1024),
        respuesta2 varchar(1024),
        primary key (id_pregunta),
        foreign key fk_ays_usuario (id_usuario) references USUARIO(id_usuario))
         engine= InnoDB default character set = utf8mb4;
        
        CREATE TABLE APPWEB.TAB_FORMULARIO_CONTACTO(
			id_formulario int not null auto_increment,
            cod_as varchar(50),
            nombre varchar(50),
            correo varchar(50),
            mensaje varchar(1024),
            primary key (id_formulario),
            foreign key fk_fc_cod_as (cod_as) references tab_ayuda_soporte(cod_as));

            
